{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { Vec2 } from \"wtc-math\";\n\nclass Grid {\n  static defaults = {\n    size: new Vec2(512, 512),\n    cellSize: new Vec2(50, 50),\n    fill: null,\n  };\n  #grid = [];\n  #size;\n  #cellSize;\n\n  constructor(settings) {\n    settings = Object.assign({}, Grid.defaults, settings);\n    this.#size = Vec2.interpolate(settings.size) || Grid.defaults.size;\n    this.#cellSize =\n      Vec2.interpolate(settings.cellSize) || Grid.defaults.cellSize;\n    this.#grid.length = this.gridSize.area;\n    this.#grid.fill(settings.fill || Grid.defaults.fill);\n  }\n\n  addChild(child, i) {\n    this.#grid[i] = child;\n  }\n  addChildAtPosition(child, pos) {\n    this.#grid[this.getArrayPosition(pos)] = child;\n  }\n  addChildAtGridPosition(child, gridPos) {\n    this.#grid[this.getArrayPositionFromGridPos(gridPos)] = child;\n  }\n\n  getChild(i) {\n    return this.#grid[i];\n  }\n  getChildAtPosition(pos) {\n    return this.#grid[this.getArrayPosition(pos)];\n  }\n  getChildAtGridPosition(gridPos) {\n    return this.#grid[this.getArrayPositionFromGridPos(gridPos)];\n  }\n\n  getGridPositionForIndex(i) {\n    const gsize = this.gridSize;\n    return new Vec2(i % gsize.x, Math.floor(i / gsize.x));\n  }\n\n  getArrayPositionFromGridPos(gpos) {\n    const gsize = this.gridSize;\n    if (gpos.x < 0 || gpos.x >= gsize.x || gpos.y < 0 || gpos.y >= gsize.y)\n      return null;\n\n    gpos.x = gpos.x % gsize.x;\n    const arraypos = gpos.x + gpos.y * gsize.x;\n    return arraypos;\n  }\n\n  getArrayPosition(realPos) {\n    const gpos = this.getGridPos(realPos);\n    return this.getArrayPositionFromGridPos(gpos);\n  }\n\n  getGridPos(realPos) {\n    if (realPos instanceof Vec2) {\n      return realPos.divideNew(this.#cellSize).floor();\n    }\n    // Throw an error\n  }\n  getSubPos(realPos) {\n    if (realPos instanceof Vec2) {\n      return realPos.modNew(this.#cellSize);\n    }\n    // Throw an error\n  }\n  getRealPos(gridPos) {\n    if (gridPos instanceof Vec2) {\n      return gridPos.multiplyNew(this.#cellSize);\n    }\n    // Throw an error\n  }\n\n  get size() {\n    return this.#size;\n  }\n  get gridSize() {\n    return this.#size.divideNew(this.#cellSize).floor();\n  }\n  get cellSize() {\n    return this.#cellSize;\n  }\n  get length() {\n    return this.#grid.length;\n  }\n}\n\nexport { Grid }"],"names":["Grid","settings","Object","assign","defaults","_classPrivateFieldLooseBase","Vec2","interpolate","size","cellSize","length","this","gridSize","area","fill","addChild","child","i","addChildAtPosition","pos","getArrayPosition","addChildAtGridPosition","gridPos","getArrayPositionFromGridPos","getChild","getChildAtPosition","getChildAtGridPosition","getGridPositionForIndex","gsize","x","Math","floor","gpos","y","realPos","getGridPos","divideNew","getSubPos","modNew","getRealPos","multiplyNew"],"mappings":"kQAEMA,aAUJ,WAAYC,mDAJJ,uHAKNA,EAAWC,OAAOC,OAAO,GAAIH,EAAKI,SAAUH,GAC5CI,aAAaC,OAAKC,YAAYN,EAASO,OAASR,EAAKI,SAASI,KAC9DH,aACEC,OAAKC,YAAYN,EAASQ,WAAaT,EAAKI,SAASK,SACvDJ,aAAWK,OAASC,KAAKC,SAASC,KAClCR,aAAWS,KAAKb,EAASa,MAAQd,EAAKI,SAASU,mCAGjDC,SAAA,SAASC,EAAOC,GACdZ,aAAWY,GAAKD,KAElBE,mBAAA,SAAmBF,EAAOG,GACxBd,aAAWM,KAAKS,iBAAiBD,IAAQH,KAE3CK,uBAAA,SAAuBL,EAAOM,GAC5BjB,aAAWM,KAAKY,4BAA4BD,IAAYN,KAG1DQ,SAAA,SAASP,GACP,oBAAkBA,MAEpBQ,mBAAA,SAAmBN,GACjB,oBAAkBR,KAAKS,iBAAiBD,OAE1CO,uBAAA,SAAuBJ,GACrB,oBAAkBX,KAAKY,4BAA4BD,OAGrDK,wBAAA,SAAwBV,GACtB,IAAMW,EAAQjB,KAAKC,SACnB,WAAWN,OAAKW,EAAIW,EAAMC,EAAGC,KAAKC,MAAMd,EAAIW,EAAMC,OAGpDN,4BAAA,SAA4BS,GAC1B,IAAMJ,EAAQjB,KAAKC,SACnB,OAAIoB,EAAKH,EAAI,GAAKG,EAAKH,GAAKD,EAAMC,GAAKG,EAAKC,EAAI,GAAKD,EAAKC,GAAKL,EAAMK,QAGrED,EAAKH,EAAIG,EAAKH,EAAID,EAAMC,EACPG,EAAKH,EAAIG,EAAKC,EAAIL,EAAMC,MAI3CT,iBAAA,SAAiBc,GACf,IAAMF,EAAOrB,KAAKwB,WAAWD,GAC7B,YAAYX,4BAA4BS,MAG1CG,WAAA,SAAWD,GACT,GAAIA,aAAmB5B,OACrB,OAAO4B,EAAQE,YAAUzB,YAAgBoB,WAI7CM,UAAA,SAAUH,GACR,GAAIA,aAAmB5B,OACrB,OAAO4B,EAAQI,SAAO3B,eAI1B4B,WAAA,SAAWjB,GACT,GAAIA,aAAmBhB,OACrB,OAAOgB,EAAQkB,cAAY7B,iCAK/B,WACE,SAAOA,iCAET,WACE,oBAAkByB,YAAUzB,YAAgBoB,8BAE9C,WACE,SAAOpB,+BAET,WACE,oBAAkBD,qMAxFhBV,EACGI,SAAW,CAChBI,KAAM,IAAIF,OAAK,IAAK,KACpBG,SAAU,IAAIH,OAAK,GAAI,IACvBQ,KAAM"}