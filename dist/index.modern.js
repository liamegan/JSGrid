import{Vec2 as t}from"wtc-math";var i=0;function e(t){return"__private_"+i+++"_"+t}function r(t,i){if(!Object.prototype.hasOwnProperty.call(t,i))throw new TypeError("attempted to use private field on non-instance");return t}var s=e("grid"),o=e("size"),n=e("cellSize");class l{constructor(i){Object.defineProperty(this,s,{writable:!0,value:[]}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),i=Object.assign({},l.defaults,i),r(this,o)[o]=t.interpolate(i.size)||l.defaults.size,r(this,n)[n]=t.interpolate(i.cellSize)||l.defaults.cellSize,r(this,s)[s].length=this.gridSize.area,r(this,s)[s].fill(i.fill||l.defaults.fill)}addChild(t,i){r(this,s)[s][i]=t}addChildAtPosition(t,i){r(this,s)[s][this.getArrayPosition(i)]=t}addChildAtGridPosition(t,i){r(this,s)[s][this.getArrayPositionFromGridPos(i)]=t}getChild(t){return r(this,s)[s][t]}getChildAtPosition(t){return r(this,s)[s][this.getArrayPosition(t)]}getChildAtGridPosition(t){return r(this,s)[s][this.getArrayPositionFromGridPos(t)]}getGridPositionForIndex(i){const e=this.gridSize;return new t(i%e.x,Math.floor(i/e.x))}getArrayPositionFromGridPos(t){const i=this.gridSize;return t.x<0||t.x>=i.x||t.y<0||t.y>=i.y?null:(t.x=t.x%i.x,t.x+t.y*i.x)}getArrayPosition(t){const i=this.getGridPos(t);return this.getArrayPositionFromGridPos(i)}getGridPos(i){if(i instanceof t)return i.divideNew(r(this,n)[n]).floor()}getSubPos(i){if(i instanceof t)return i.modNew(r(this,n)[n])}getRealPos(i){if(i instanceof t)return i.multiplyNew(r(this,n)[n])}get size(){return r(this,o)[o]}get gridSize(){return r(this,o)[o].divideNew(r(this,n)[n]).floor()}get cellSize(){return r(this,n)[n]}get length(){return r(this,s)[s].length}}l.defaults={size:new t(512,512),cellSize:new t(50,50),fill:null};export{l as Grid};
//# sourceMappingURL=index.modern.js.map
